<div class="ax-selector-header">
    <div>Name</div>
    <div>Transaction group</div>
    <div>Date modified</div>
    <div>Timeout</div>
    <div>Break</div>
    <div>Measure</div>
    <div>Warning</div>
    <div>Critical</div>
    <div>Resolution</div>
    <div>Screen</div>
</div>
<div class="ax-selector-table" #tableContainer>
    <cdk-table [dataSource]="filteredData">

        <!-- Name Definition -->
        <ng-container cdkColumnDef="name">

            <cdk-cell *cdkCellDef="let row"> <input type="text" class="primary" [(ngModel)]="row.name" /> </cdk-cell>
        </ng-container>

        <!-- Transaction group Definition -->
        <ng-container cdkColumnDef="transactionGroup">
            <cdk-cell *cdkCellDef="let row"><input type="text"  [ngModel]="row.object.measure.group" (ngModelChange)="changeTransactionGroup(row,$event)" />
            </cdk-cell>
        </ng-container>

        <!-- Date modified Definition -->
        <ng-container cdkColumnDef="dateModified">
            <cdk-cell *cdkCellDef="let row">{{row.object.date_modified.substring(0,20)}} </cdk-cell>
        </ng-container>

        <!-- Timeout Definition -->
        <ng-container cdkColumnDef="timeout">
            <cdk-cell *cdkCellDef="let row"><input type="number"  [(ngModel)]="row.object.detection.timeout_s" min="1" /></cdk-cell>
        </ng-container>

        <!-- Break Definition -->
        <ng-container cdkColumnDef="break">
            <cdk-cell *cdkCellDef="let row"><input class="regular-checkbox" [(ngModel)]="row.object.detection.break" type="checkbox" /></cdk-cell>
        </ng-container>

        <!-- Measure Definition -->
        <ng-container cdkColumnDef="measure">
            <cdk-cell *cdkCellDef="let row"><input class="regular-checkbox" [(ngModel)]="row.object.measure.output" type="checkbox" />
            </cdk-cell>
        </ng-container>

        <!-- Warning Definition -->
        <ng-container cdkColumnDef="warning">
            <cdk-cell *cdkCellDef="let row"><input type="number"  [(ngModel)]="row.object.measure.thresholds.warning_s" min="1" />
            </cdk-cell>
        </ng-container>

        <!-- Critical Definition -->
        <ng-container cdkColumnDef="critical">
            <cdk-cell *cdkCellDef="let row"><input type="number"  [(ngModel)]="row.object.measure.thresholds.critical_s" min="1" />
            </cdk-cell>
        </ng-container>

        <!-- Resolution Definition -->
        <ng-container cdkColumnDef="resolution">
            <cdk-cell *cdkCellDef="let row">
              <select [(ngModel)]="row.selectedResolution">
                <option [ngValue]="resolution" *ngFor="let resolution of objectKeys(row.object.components)">{{resolution}}</option>
              </select>

            </cdk-cell>
        </ng-container>

        <!-- Screen Definition -->
        <ng-container cdkColumnDef="screen">
            <cdk-cell *cdkCellDef="let row"><img *ngIf="row.object.components[row.selectedResolution]"
                    [src]="imageFor(row.object.components[row.selectedResolution].screen)">
            </cdk-cell>
        </ng-container>

        <!-- Header and Row Declarations -->
        <cdk-row (click)="selectRow(row)" [ngClass]="{'selected': row.name == selectedRow.name}" *cdkRowDef="let row; columns: selectorColumns"></cdk-row>
    </cdk-table>
</div>

<div class="ax-selector-footer distribute form-group">
    <div>
      <span class="inline-label">Delay [s]</span>
      <input class="small" [(ngModel)]="delay" type="number"  min="0" />
      <button class="btn" (click)="newObject()">Add</button>
    </div>
    <div>
      <span class="inline-label">Resolution: </span>
      <select class="std-width" [(ngModel)]="selectedResolution" (change)="changeResolution()">
        <option value="All">All</option>
        <option *ngFor="let resolution of resolutions" value="{{resolution}}">{{resolution}}</option>
      </select>
      <span class="inline-label"> Search: </span>
      <input type="text" class="std-width" [(ngModel)]="searchElementQuery" (change)="filterData()"/>
    </div>
    <div>
      <button class="btn btn-primary" (click)="ok()">Ok</button>
      <button class="btn" (click)="cancel()">Cancel</button>
      <button class="btn btn-secondary" (click)="edit()">Edit</button>
    </div>
</div>
